<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>前端，沒有極限Demo</title>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<link rel="stylesheet" type="text/css" href="http://dorisofsky.github.io/illimited/index.css">
</head>
<body>
	<div class="demo">
		<script type="text/javascript">

		var dataset = []; //建立空的資料陣列

		for (var i=0; i < 20; i++){
			var newNum = 5 + Math.floor(Math.random() * 30);
			dataset.push(newNum);

			var Num1 = 5 + Math.floor(Math.random() * 480); //產生第一個數值
			var Num2 = 5 + Math.floor(Math.random() * 230); //產生第二個數值
			dataset.push([Num1, Num2]); //兩個合併成一個陣列
		}
		//隨機產生一組長度20，值為5~35的數字。

		d3.select('.demo').selectAll('div')  //選取 class內的div
			.data(dataset) // 將資料加入至 div
			.enter() // return data
			.append('div') // 這邊加入的div已經有包含data
			.attr('class','bar') //套用class
			.style('height', function(d){ //將data的值取出作為高
				return (d*3)  + 'px' ;
			})

		console.log(d3.select('.demo').selectAll('div'));

	

	</script>
	<script>

		var w = 600,h = 250,padding = 20;
		//定義SVG的大小

		var dataset = []; 
		for (var i=0; i < 20; i++){
			var Num1 = 5 + Math.floor(Math.random() * 900);
			var Num2 = 5 + Math.floor(Math.random() * 220);
			dataset.push([Num1, Num2]);
		};
		console.log(dataset);
		//和先前一樣，產生一組隨機的資料

		var Xmax = d3.max(dataset, function(d){return d[0]}),
			Xmin = d3.min(dataset, function(d){return d[0]}),
			Ymax = d3.max(dataset, function(d){return d[1]}),
			Ymin = d3.min(dataset, function(d){return d[1]})
		//這個函示可以取得資料的最大值、最小值

		var xScale = d3.scale.linear() //產生一個屬於X軸的線性尺度
			.domain([Xmin, Xmax]) //傳入的值是原始資料的最小及最大值
			.range([0 , 100]) 
			//輸出的範圍是左邊的padd距離，到右邊的padding

		var yScale = d3.scale.linear()
			.domain([Ymin, Ymax])
			.range([ 0 ,100])
			//類似X軸的尺度

		var svg = d3.select('.demo').append('svg').attr({'width': w,'height': h})
			//接下來開始產生SVG
			
		svg.selectAll('circle').data(dataset).enter() //和先前一樣，選取'circle'並把資料加入
		.append('circle') // 增加圓到SVG內
		.attr({	//加入屬性到圓
			'cx': function(d){return xScale(d[0])}, //利用尺度算出X的位置
			'cy': function(d){return yScale(d[1])}, //同理算出Y
			'r': function(d){return Math.sqrt(h - d[1])}, //圓的大小是高 - Y值的平方
			'fill': function(d){return d3.hsl(d[0] % 360, .6, .6 );} 
			//介紹一個顏色的function hsl，可以將顏色算出後轉成色碼
			//格式 (360色相, 1彩度, 1明度)
		});

		svg.selectAll('text').data(dataset).enter() //補上資料數值
		.append('text') 
		.text(function(d){ return d[0]+ ',' + d[1]}) //將值寫到SVG上
		.attr({
			'x': function(d){return xScale(d[0])}, //和上面相同，算出X、Y的位置
			'y': function(d){return yScale(d[1])},
			'fill': 'red', //文字填滿為紅色
			'font-size': '10px' //Fill、font-size也可以用CSS寫喔～
		});

	</script>

	<script>
	
	</script>
		
	</div>

</body>
</html> 
